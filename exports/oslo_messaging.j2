{% macro rabbit(cfg_type) -%}
{% if cfg_type == 'rpc_config' -%}
[DEFAULT]
transport_url=rabbit://{{ rabbitmq.user }}:{{ rabbitmq.password }}@{{ address('rpc', rabbitmq.port) }}
{%- elif cfg_type == 'notifications_config' -%}
[oslo_messaging_notifications]
transport_url=rabbit://{{ rabbitmq.user }}:{{ rabbitmq.password }}@{{ address('notifications', rabbitmq.port) }}
{%- endif %}

{% if rabbitmq.tls.enabled %}
[oslo_messaging_rabbit]
kombu_ssl_version="TLSv1_2"
rabbit_use_ssl = true
kombu_ssl_ca_certs = /opt/ccp/etc/tls/ca.pem
{% endif %}

{%- endmacro %}
